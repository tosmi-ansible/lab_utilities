---
- name: Create a test VM as the current user
  gather_facts: false
  become: false
  hosts:
    - localhost
  vars:
    lab:
      ssh_public_key: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIIYhjnWzsArZVyyTa1E6sDbH06rUGDAhAF3bf3pmeBtm toni@stderr.at"
      name: linux
      network:
        name: default
        type: nat
      hosts:
        - name: test-vm
          macaddr: 52:54:00:6c:3c:01
          ipaddr: 192.168.122.3
          libvirt_session: user
          disksize_gb: 10
          memory: 8192
          cpu: 2
          image: rhel-9.4-x86_64-kvm.qcow2
  roles:
    - { role: create_vm }
